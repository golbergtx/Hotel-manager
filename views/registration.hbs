<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport"
	      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link rel="stylesheet" href="/css/main.css">
	<link rel="stylesheet" href="/css/registration.css">
	<title>Registration</title>
</head>
<body>
<article>
	<input type="text" v-model="guestNameFilter" class="filter-input" placeholder="Имя">

	<div v-for="(registration, index) in displayedRegistrations">
		<span v-text="registration.roomNumber"></span>
		<span v-text="registration.price"></span>
		<span v-text="getFormatDate(registration.dateOfArrival)"></span>
		<span v-text="getFormatDate(registration.dateOfDeparture)"></span>
		<span v-text="registration.methodOfPayment"></span>
		<span v-text="registration.getSumPrice()"></span>
		<span v-text="registration.guestID"></span>
		<button class="delete-registration-btn" @click="deleteRegistration(index)"></button>
	</div>

	<button class="open-registration-popup-btn" @click="openRegistrationPopup"></button>

	<div class="registration-popup" v-show="openedRegistrationPopup">
		<span class="registration-popup-error-message" v-if="registrationPopupErrorMessage"
		      v-text="registrationPopupErrorMessage"></span>
		<div>
			<label for="">Номер</label>
			<select class="registration-select" v-model="registration.roomNumber" @change="onChangeRoomNumber">
				<option v-for="(roomNumber) in freeRoomNumbers" v-text="roomNumber"></option>
			</select>
		</div>
		<div>
			<label for="">Цена</label>
			<input type="text" readonly class="registration-category-input" v-model="registration.price">
		</div>
		<div>
			<label for="">Дата заселення</label>
			<input type="date" class="registration-dateOfArrival-input" v-model="registration.dateOfArrival"
			       @change="setSumPrice">
		</div>
		<div>
			<label for="">Дата виселеня</label>
			<input type="date" class="registration-dateOfDeparture-input" v-model="registration.dateOfDeparture"
			       @change="setSumPrice">
		</div>
		<div>
			<label for="">Метод оплаты</label>
			<input type="text" class="registration-price-input" v-model="registration.methodOfPayment">
		</div>
		<div>
			<label for="">Гость</label>
			<select class="registration-select" @change="onChangeGuestID">
				<option v-for="guest in guests" v-text="guest.getFullName()"></option>
			</select>
		</div>
		<div>
			<label for="">Общая сумма</label>
			<input type="text" readonly class="registration-whole-amount-input" v-model="registration.wholeAmount">
		</div>
		<button class="save-new-registration-data-btn" @click="addRegistration"></button>
		<button class="close-edit-popup-btn" @click="closeRegistrationPopup"></button>
	</div>
</article>
<script src="/js/vue.js"></script>
<script type="module" src="/js/registration-page.js"></script>
</body>
</html>